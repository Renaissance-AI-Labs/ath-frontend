ğŸ“˜ ä¸€ã€æ€»ä½“è¯´æ˜
å…¥é‡‘åˆçº¦éƒ¨ç½²åœ¨ JUCHAIN å…¼å®¹é“¾ä¸Šï¼ˆnetwork 210000ï¼‰ã€‚
æ¯ä¸ªé¡¹ç›®æ–¹å‡å·²ç”±ç®¡ç†å‘˜é…ç½®å®Œæˆï¼š
	â€¢	é¡¹ç›®ä»£å·ï¼ˆprojectCodeï¼‰
	â€¢	æ”¶æ¬¾é’±åŒ…åœ°å€ï¼ˆwalletï¼‰
	â€¢	å…¥é‡‘ä»£å¸ç±»å‹ï¼ˆæ­¤å¤„ä¸ºä¸»å¸ï¼‰
é¡¹ç›®æ–¹å‰ç«¯æˆ–åç«¯åªéœ€å¼•å¯¼ç”¨æˆ·æ‰§è¡Œä¸‰æ­¥æ“ä½œï¼Œå³å¯å®Œæˆå…¥é‡‘ã€‚
åˆ¤æ–­æˆåŠŸçš„æ ‡å‡†ä¸ºï¼š
äº¤æ˜“æˆåŠŸä¸Šé“¾ï¼ˆæœ‰ tx hash ä¸”æ—  revertï¼‰ï¼Œå³è¡¨ç¤ºå…¥é‡‘æˆåŠŸã€‚
åˆçº¦ä¼šè‡ªåŠ¨å°†ä¸»å¸è½¬è‡³é¡¹ç›®æ–¹é’±åŒ…ï¼Œå¹¶è§¦å‘ Deposit äº‹ä»¶ã€‚
ğŸ§­ äºŒã€æ¥å…¥æ­¥éª¤ï¼ˆä»¥ä¸»å¸å…¥é‡‘ä¸ºä¾‹ï¼‰
Step 1. ç”¨æˆ·ç»‘å®š UID
æ¯ä¸ªç”¨æˆ·åœ°å€åœ¨é¦–æ¬¡å…¥é‡‘å‰å¿…é¡»å…ˆç»‘å®š UIDã€‚
å‡½æ•°è°ƒç”¨
function bindUid(uint256 uid) external
è¯´æ˜
	â€¢	uid ä¸ºé¡¹ç›®æ–¹ç³»ç»Ÿä¸­ç”¨æˆ·çš„å”¯ä¸€ IDï¼ˆé 0ï¼‰ã€‚
	â€¢	ä¸€ä¸ªåœ°å€åªèƒ½ç»‘å®šä¸€ä¸ª UIDï¼Œä½†åŒä¸€ UID å¯ç»‘å®šå¤šä¸ªåœ°å€ã€‚
	â€¢	è‹¥æœªç»‘å®š UID ç›´æ¥å…¥é‡‘ï¼Œäº¤æ˜“ä¼š revertã€‚
ç¤ºä¾‹ï¼ˆå‰ç«¯JSè°ƒç”¨ï¼‰
await contract.methods.bindUid(1001).send({ from: userAddress });
Step 2. å‘èµ·å…¥é‡‘ï¼ˆä¸»å¸JUï¼‰
å‡½æ•°è°ƒç”¨
function deposit(string calldata projectCode, uint256 amount) external payable
å‚æ•°è¯´æ˜
	â€¢	projectCode: é¡¹ç›®ä»£å·å­—ç¬¦ä¸²ï¼ˆä¾‹å¦‚ "WATER2025"ï¼Œæå‰ä»å®¢æœè·å¾—ï¼‰
	â€¢	amount: å¯¹äºä¸»å¸å…¥é‡‘å¯å¡« 0
	â€¢	msg.value: å…¥é‡‘é‡‘é¢ï¼ˆä¸»å¸æ•°é‡ï¼Œå•ä½ä¸º weiï¼‰
æ‰§è¡Œæµç¨‹
	â€¢	ç”¨æˆ·è°ƒç”¨ deposit("WATER2025", 0)ï¼ŒåŒæ—¶å‘é€ä¸»å¸ã€‚
	â€¢	åˆçº¦éªŒè¯ç»‘å®šçŠ¶æ€åŠé¡¹ç›®é…ç½®ã€‚
	â€¢	å°†ä¸»å¸ç›´æ¥è½¬å…¥é¡¹ç›®æ–¹é’±åŒ…ã€‚
	â€¢	è§¦å‘ Deposit(uid, amount, token, projectCode, usdtValue) äº‹ä»¶ã€‚
ç¤ºä¾‹ï¼ˆethers.jsï¼‰
const tx = await contract.deposit("WATER2025", 0, {
  from: userAddress,
  value: ethers.utils.parseEther("1.5") // å…¥é‡‘1.5ä¸»å¸
});
console.log("å…¥é‡‘äº¤æ˜“å“ˆå¸Œ:", tx.hash);
åˆ¤æ–­æˆåŠŸ
	â€¢	å‰ç«¯æˆ–åç«¯ç›‘å¬äº¤æ˜“å›æ‰§ï¼š
const receipt = await tx.wait();
if (receipt.status === 1) {
  console.log("âœ… å…¥é‡‘æˆåŠŸï¼ŒTX:", tx.hash);
} else {
  console.error("âŒ å…¥é‡‘å¤±è´¥");
}
	â€¢	è‹¥ status = 1ï¼Œè¯´æ˜äº¤æ˜“ä¸Šé“¾å¹¶æœª revertï¼Œå³å…¥é‡‘æˆåŠŸã€‚
ï¼ˆèµ„é‡‘æ­¤æ—¶å·²è‡ªåŠ¨è½¬åˆ°é¡¹ç›®æ–¹é’±åŒ…ï¼‰
Step 3. ç›‘å¬é“¾ä¸Šäº‹ä»¶ï¼ˆå¯é€‰ï¼‰
äº‹ä»¶å®šä¹‰
event Deposit(
  uint256 indexed uid,
  uint256 amount,
  address indexed token,
  string projectCode,
  uint256 usdtValue
);
ç›‘å¬æ–¹å¼
é¡¹ç›®æ–¹åç«¯å¯ä»¥ç›‘å¬è¯¥äº‹ä»¶ï¼Œä»¥åŒæ­¥åˆ°è´¦è®°å½•ã€‚
ç¤ºä¾‹ï¼ˆweb3.jsï¼‰
contract.events.Deposit({ filter: { projectCode: "WATER2025" } })
.on('data', e => {
  console.log("æ£€æµ‹åˆ°å…¥é‡‘äº‹ä»¶ï¼š", e.returnValues);
  // e.returnValues.uid, e.returnValues.amount, e.returnValues.usdtValue ç­‰
});
âš™ï¸ ä¸‰ã€å®Œæ•´è°ƒç”¨ç¤ºä¾‹ï¼ˆå‰ç«¯/åç«¯ç»Ÿä¸€æ¥å£ï¼‰
import { ethers } from "ethers";
const contractAddress = "0xYourContract";
const abi = [...]; // ä¸Šæ–‡ABI
const provider = new ethers.providers.Web3Provider(window.ethereum);
const signer = provider.getSigner();
const contract = new ethers.Contract(contractAddress, abi, signer);
// å‡è®¾ projectCode ä¸º "WATER2025"
async function depositMain(uid, amountETH) {
  // 1. ç¡®ä¿é’±åŒ…å·²è¿æ¥
  const user = await signer.getAddress();
  // 2. æ£€æŸ¥ç»‘å®š
  const uidBound = await contract.uidOf(user);
  if (uidBound.toString() === "0") {
    console.log("æœªç»‘å®šUIDï¼Œæ­£åœ¨ç»‘å®š...");
    await contract.bindUid(uid);
  }
  // 3. æ‰§è¡Œå…¥é‡‘
  const tx = await contract.deposit("WATER2025", 0, {
    value: ethers.utils.parseEther(amountETH)
  });
  console.log("æäº¤å…¥é‡‘ï¼ŒTxHash:", tx.hash);
  const receipt = await tx.wait();
  if (receipt.status === 1) {
    console.log("âœ… å…¥é‡‘æˆåŠŸ:", tx.hash);
  } else {
    console.error("âŒ å…¥é‡‘å¤±è´¥");
  }
}
ğŸ“Š å››ã€äº¤æ˜“ç»“æœåˆ¤æ–­é€»è¾‘
çŠ¶æ€	è¡¨ç¤º	å¤„ç†
tx.hash å­˜åœ¨ï¼Œstatus=1	å…¥é‡‘æˆåŠŸ	å¯ç›´æ¥æ ‡è®°ç”¨æˆ·å……å€¼æˆåŠŸ
tx.hash å­˜åœ¨ï¼Œstatus=0 æˆ– revert	å…¥é‡‘å¤±è´¥	é€šçŸ¥ç”¨æˆ·å¤±è´¥åŸå› 
æœªç”Ÿæˆ tx.hash	ç”¨æˆ·æœªç­¾åæˆ–è¢«æ‹’ç»	ä¸è®¡å…¥è®°å½•
âœ… äº”ã€å…³é”®è¦ç‚¹æ€»ç»“
	1.	ç»‘å®š UID â†’ å…¥é‡‘ ä¸ºæ ‡å‡†æµç¨‹ã€‚
	2.	å…¥é‡‘åˆçº¦è‡ªåŠ¨è½¬è´¦è‡³é¡¹ç›®æ–¹é’±åŒ…ï¼Œæ— éœ€é¢å¤–æç°ã€‚
	3.	åˆ¤æ–­æˆåŠŸä»…éœ€ç¡®è®¤äº¤æ˜“æœª revertã€‚
	4.	é¡¹ç›®æ–¹å¯ç›‘å¬ Deposit äº‹ä»¶ä½œä¸ºåç«¯å¯¹è´¦ä¾æ®ã€‚
